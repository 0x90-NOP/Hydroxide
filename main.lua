--[[ <
                                                                                                                                                               
                                   **.     .*.                    *%\                              (*)         *%\                                             
                                   &&/    ./&/                    *&|                    .       .             *&|                                             
                                   &&/    .(&/ *#(    ./#.  .*%%(/(&| .#/*%%*  .*#%%#,   (/.   (#. .#/   .*%%(/(&|   .*#%#(\                                   
                                   &@%#####&@/  ,#%* .&%*  *&(    *&| .@%,   ,@#,    %@#  /&@&&,   ,&(  *&(    *&|  (&/,,,*#%                                 
                                   &&/    .(&/   .@%,(%*   \&/    *&| .,     ,@(.    #@#  ,#@@&    ,&(  \&/    *&|  (&/,,,,,.                                  
                                   ##*     *#*    ./@#      \(%%(**#/ .#(.     ,(%%%#.  .#*    #%. .#/   \(%%(**#/   \%%%%%#,                                  
                                                  ,%#,                                                                                                         
                                                  (&*                                                                                                           
                                                                                                                                                               
                                                                                                                                                               
                                                                                                             ..,,,,,,,***********,,.                            
                                                                                                      ...,,,,,,,,,,,,,,,,,,,,**********,.                      
                                                                                                   .,,,,,,,,,,,,,,,,,,,,,,,,,,,,,**********,                   
                                                                                               ,,,,,......................,,,,,,,,,,,,**********,              
                                                                                             ,,,..............................,,,,,,,,,,***********,           
                                                   .,,//(###%%%%%%%%%%%%%%%##((/*,.        .,,.................................,,,,,,,,,,************.         
                                            .*/(#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%##(*,............              ............,,,,,,,,,,************,.       
                                   ,/(%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%(*.......                        ..........,,,,,,,,,*************,    
                                ./(%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%/,......                           ........,,,,,,,,,***********//**    
                             ,*#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*......                             .......,,,,,,,,,************///,   
                          ,/%%%%%%%%%%%%%%%%###############%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*.....                               ......,,,,,,,,,************///**,  
                     ,(%%%%%%%%%%%###############################%%%%%%%%%%%%%%%%%%%%%%%*.....                               .......,,,,,,,,,************/////, 
                   *(%%%%%%%%%%#####################################%#%%%%%%%%%%%%%%%%%%/,....                               ......,,,,,,,,,*************/////* 
                 .*%%%%%%%%%#########################################%##%%%%%%%%%%%%%%%%(,....                               ......,,,,,,,,,*************////*,
                (#%%%%%%%%################################################%%%%%%%%%%%%%%#/.....                             .......,,,,,,,,,*************/////*
            ,/%%%%%%%#######################################################%%%%%%%%%%%%%%/,.....                         .......,,,,,,,,,,*************//////*
           (%%%%%%%%#########################################################%%%%%%%%%%%%%#/,......                     ........,,,,,,,,,,**************//////*
         ,(%%%%%#%##########################((((((((((((((######################%%%%%%%%%%%#(.........               .........,,,,,,,,,,***************///////*
         (%%%%%%%#######################((((((((((((((((((((((################%%%%%%%%%%%%%%#*...........         ...........,,,,,,,,,,,**************////////*
      .#%%%%%%####################((((/////////////////////////((((################%%%%%%%%%%%%/,......................,,,,,,,,,,,,,,***************/////////,.
     ,(%%%%%%%##################((((//////////////*****///////////(((##############%%%%%%%%%%%%%(,,,...............,,,,,,,,,,,,,,,,*****************/////////. 
    *#%%%%%%###################((((//////////**************////////(((#############%%%%%%%%%%%%%%#/,,,,,,,,,,,,,,,,,,,,,,,,,,,,,******************//////////*  
   .#%%%%%%##################((((////////*********************///////((############%%%%%%%%%%%%%%%%#*,,,,,,,,,,,,,,,,,,,,,,,,,*******************//////////,.  
  ,(%%%%%%%#################(((///////**************************//////((###########%%%%%%%%%%%%%%%%%%%(/*,,,,,,,,,,,,,,,***********************/////////**.    
  (%%%%%%%#################((((///////***************************//////((##########%%%%%%%%%%%%%%%%%%%%%%/*,,,,,,,**************************///////////*.      
 .%%%%%%%%%################(((///////*****************************/////((##########%%%%%%%%%%%%%%%%%%%%%%%%(******************************////////////*.       
./%%%%%%%%#################(((//////******************************/////((##########%%%%%%%%%%%%%%%%%%%%%%%%%%#(/***********************/////////////*,         
*#%%%%%%%%#################(((//////*****************************//////((##########%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#(/**********////////////////*,.            
(%%%%%%%%%##################(((///////**************************//////((##########%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&%%#(///////////////////**,.               
#%%%%%%%%%%#################(((///////**************************/////((##########%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&%%%##(((((//*,,.                    
#%%%%%%%%%%##################(((////////**********************//////((###########%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&%/.                       
%%%%%%%%%%%%%###################(((//////////*********//////////((############%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&%/.                       
%%%%%%%%%%%%%####################((((/////////////////////////(((#############%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&%/.                       
#%%%%%%%%%%%%%%#####################((((///////////////////(((##############%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&%/.                       
#%%%%%%%%%%%%%%%#######################((((((((/////(((((((################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&*                        
/%%%%%%%%%%%%%%%%%%####################################################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&(.                        
,#%%%%%%%%%%%%%%%%%%%%%############################################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&*                         
./%%%%%%%%%%%%%%%%%%%%%%%#######################################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&%.                         
 ,%%%%%%%%%%%%%%%%%%%%%%%#####################################%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&                          
  *#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%######%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&/.                          
  ./%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&%.                           
   .#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&%/                            
    *#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*                             
      ,%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%(                               
       *#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&/.                               
        .%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%(                                 
         ,(&&%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%,                                  
           .*#&%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&/.                                    
             .#%&%&&&%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*                                      
               ,%&&&&&&%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%(                                        
                .*(&&&&&&&&%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%(.                                         
                     ,(%&&&&&&&&&&&&&&%%%%&&&&&&&&&&&%&&&&%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%*.                                             
                       /#%&&&&&&&&&&&&&&&&&&&&&%%%%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&/,                                               
                         .(#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%(,                                                  
                            ,/#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%#,.                                                    
                                   ,/(%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%&&&%/,.                                                           
                                       .*(%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%%#*,                                                                
                                          .,*##%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%%#(,.                                                                   
                                                 .,*(#%%%&&&&&&&&&&&&&&&&&&&&%%%#(/,,                                                                          

Hydroxide :: nerve
    "Hydroxide is a penetration testing tool, used to edge the security of Roblox games."

<< Features:
    > Data Explorer
    > Data Manipulation
    > Data Information
    > Code Generation
    > Script Viewer
    > Remote Call "Spy"
>>

]]-- >

-- < Existence Check >
if ui and game:GetService("CoreGui"):FindFirstChild("Hydroxide") then -- Checks if an instances already exists
    getgenv().ui = nil
    game:GetService("CoreGui").Hydroxide:Destroy()
end

-- <Environment Check>
do -- Checks if the exploit has the required functions
    if not getgenv then
        warn("<OH-> : Your exploit does not have getgenv, which is a vital function.")
        return
    end

    local verified = true
    local functions = {
        getrawmetatable = getrawmetatable or debug.getmetatable or false,
        setrawmetatable = setrawmetatable or debug.setmetatable or false,
        getupvalues = debug.getupvalues or getupvalues or getupvals or false,
        getupvalue = debug.getupvalue or getupvalue or getupval or false,
        setupvalue = debug.setupvalue or setupvalue or setupval or false,
        getconstants = debug.getconstants or getconstants or false,
        setconstant = debug.setconstant or setconstant or false,
        isexploitclosure = is_synapse_function or is_neutron_function or function() return false end,
        setreadonly = setreadonly or false,
        islclosure = islclosure or false,
        getgc = getgc,
    }

    for i, f in next, functions do
        if f then
            getgenv()[i] = f
        else
            verified = false
            print("<OH-> : Your exploit does not have " .. i)
        end
    end

    if not verified then
        warn("<OH-> : Your exploit must have the functions listed above in order to use Hydroxide.")
    end
end

-- < lol? >
for i,v in next, getreg() do
    if type(v) == "function" and islclosure(v) then
        local scr = getfenv(v).script
        for k,x in next, getconstants(v) do
            if x == "Hydroxide" and scr ~= script then
                scr:Destroy()
            end
        end
    end 
end

-- < Variables >
getgenv().ui = {}
getgenv().abs = {}

ui.addHighlight = function(element) -- Adds highlight to text when hovered over
    element.MouseEnter:Connect(function()
        element.TextColor3 = Color3.fromRGB(240, 240, 240)
        element.Font = "SourceSansSemibold"
    end)

    element.MouseLeave:Connect(function()
        element.TextColor3 = Color3.fromRGB(200, 200, 200)
        element.Font = "SourceSans"
    end)
end

local dataCache = {}
local addedUpvalueCache = {}

local tableCache = {}
local functionCache = {}

-- < Variables : Interface >
local interface = game:GetObjects("rbxassetid://3223506759")[1]

local drag = interface.Drag
local messageBox = interface.MessageBox
local searchUpvalues = interface.SearchUpvalues
local setValueType = interface.SetValueType

local body = drag.Body
local border = drag.BorderFrame
local collapse = drag.Collapse

local sidebar = body.Sidebar
local information = body.Information
local console = body.Console
local remoteSpy = body.RemoteSpy
local viewValue = body.ViewValue
local misc = body.Miscellaneous.List
local welcome = body.Welcome.Scroll

-- < Variables : Interface Instantiation > 
local buttonClone = sidebar._G:Clone() -- Creates a usable sidebar button template
buttonClone.ClipsDescendants = true
buttonClone.Icon.ImageTransparency = 0
buttonClone.Label.Font = "SourceSans"
buttonClone.Label.Size = UDim2.new(0, 175, 0, 20)
sidebar._G:Destroy() -- Destroys the original button

local changelogs = welcome.ChangeLogs
changelogs.TextWrapped = true
changelogs.Text = ''

for i,v in next, misc:GetChildren() do -- Miscellaneous section clicks
    local finished = {
        SearchUpvalues = true
    }
    if v:IsA("Frame") then
        local label = v.Label

        label.MouseButton1Click:Connect(function()
            if not finished[v.Name] then
                ui.msg("Woops!", '"' .. label.Text .. "\" is not available yet!")
            end

            if v.Name == "SearchUpvalues" then
                setValueType.Visible = false
            end
        end)

        ui.addHighlight(label)
    end
end

local changes = loadstring(game:HttpGet("https://raw.githubusercontent.com/0x90-NOP/Hydroxide/master/changeLogs.lua"))()
for i,v in next, changes do
    changelogs.Text = changelogs.Text .. "• " .. v .. '\n'
end

-- < Interface : Message Box >
messageBox.Button.MouseButton1Click:Connect(function() -- "Closes" the message box
    messageBox.Visible = false
    border.Visible = true
end)

ui.msg = function(title, message) -- "Creates" a message box
    messageBox.Visible = true
    messageBox.Title.Text = title
    messageBox.Content.Text = message
    border.Visible = false
end

-- < Globals : Abstractions >
abs.isRobloxType = function(data) -- Checks if the type is Roblox-made
    return type(data) ~= typeof(data)
end

abs.tableSize = function(table) -- Returns the number of elements in a given table
    local size = 0
    for i, e in next, table do
        size = size + 1
    end
    return size
end

abs.getUpvalues = function()
    local upvalues = {}
    for i,v in next, getgc() do
        if type(v) == "function" and not isexploitclosure(v) then
            for k,x in next, getupvalues(v) do
                local cache 
                local dataType = type(x)

                local byValue = {string = true, boolean = true, number = true}

                        -- check by value                               -- check by key
                if (not byValue[dataType] and not upvalues[x]) or (byValue[dataType] and not upvalues[k]) then
                    upvalues[k] = {data = x, func = v}
                end
            end
        end
    end

    wait()
    return upvalues
end

abs.scanForUpvalue = function(upvalue)
    local upval = {}
    for i,v in next, getgc() do
        if type(v) == "function" then
            if getupvalue(v, upvalue) then
                upval.data = getupvalue(v, upvalue)
                upval.func = v
                break
            end
        end
    end
    
    wait()
    return upval
end

abs.getScripts = function() -- Returns all scripts and modules which the client has access to and are not parented to nil
    local scripts, modules = {}, {}
    for i, f in next, getreg() do
        if type(f) == "function" then
            local scr = getfenv(f).script
            if typeof(scr) == "Instance" and (not scripts[scr] or not modules[scr]) and scr.Parent ~= nil then
                if scr:IsA("ModuleScript") then
                    modules[scr] = f
                else
                    scripts[scr] = f
                end
            end
        end
    end

    wait()
    return scripts, modules
end

-- < Interface : Dragging > [Credits to @Tiffblocks]
do
    local dragging, dragInput, dragStart, startPos

    drag.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = drag.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    drag.InputChanged:connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            drag.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

-- < Interface : Set Value Type >
local svtClear = function()
    for i,v in next, setValueType:GetChildren() do
        if v:FindFirstChild("Label") then
            v.Text = ''
            v.Label.Font = "SourceSans"
        end
    end
end

local svtEvent
local svtNumber = setValueType.Number
local svtString = setValueType.String
local svtBoolean = setValueType.Boolean
local svtUserdata = setValueType.Userdata

svtNumber.MouseButton1Click:Connect(function()
    svtClear()
    svtNumber.Text = '✓'
    svtNumber.Label.Font = "SourceSansSemibold"
end)

svtString.MouseButton1Click:Connect(function()
    svtClear()
    svtString.Text = '✓'
    svtString.Label.Font = "SourceSansSemibold"
end)

svtBoolean.MouseButton1Click:Connect(function()
    svtClear()
    svtBoolean.Text = '✓'
    svtBoolean.Label.Font = "SourceSansSemibold"
end)

svtUserdata.MouseButton1Click:Connect(function()
    svtClear()
    svtUserdata.Text = '✓'
    svtUserdata.Label.Font = "SourceSansSemibold"
end)

-- < Interface : Information > 
local typeIcon = { 
    string = 3285671510,
    number = 3285671510,
    boolean = 3285671510,
    table = 3285651068,
    userdata = 3285664726,
    ["function"] = 3285661880
}

local attrs = {
    string = {
        ViewValue = true
    },
    number = {
        ViewValue = true
    },
    boolean = {
        ViewValue = true
    },
    userdata = {
        ViewValue = true
    },
    table = {
        Elements = true,
        ModifyElements = true
    },
    ["function"] = {
        Upvalues = true,
        Constants = true,
        Overwrite = true,
        ViewSource = true
    }
}

local scanUpvalues
local addExEvent
local viewValueEvent 
local vVBackEvent 
local vVChangeEvent
local showInfo = function(name, data, options)
    if not information.Visible then
        welcome.Visible = false
        information.Visible = true
    end

    if addExEvent then
        addExEvent:Disconnect()
    end
    
    local infoBody = information.Body
    local icon = information:FindFirstChild("Name").Icon
    local index = icon.Index

    local dataType = type(data)
    
    icon.Image = "rbxassetid://" .. typeIcon[dataType]
    index.Text = name
    index.Size = UDim2.new(0, index.TextBounds.X, 0, 20)
    icon.Position = UDim2.new(1, -(index.TextBounds.X + 24), 0, 4)

    for i,v in next, infoBody:GetChildren() do
        if attrs[dataType][v.Name] and not v:IsA("UIListLayout") then
            v.Visible = true
        elseif not v:IsA("UIListLayout") then
            v.Visible = false
        end
    end

    infoBody.Type.Visible = true
    infoBody.Type.Text = "type: " .. dataType

    if not options then
        options = {}
    end
    
    if options.addToExplorer and not addedUpvalueCache[data] then
        local addExplorer = infoBody.AddToExplorer
        addExplorer.Visible = true
        addExEvent = addExplorer.Button.MouseButton1Click:Connect(function()
            ui.addButton(name, data, root, {func = options.func})
            addedUpvalueCache[data] = true
            addExplorer.Visible = false
        end)
    end

    if attrs[dataType].ViewValue then
        if viewValueEvent then
            viewValueEvent:Disconnect()
        end

        viewValueEvent = infoBody.ViewValue.Button.MouseButton1Click:Connect(function()
            local vVIcon = viewValue:FindFirstChild("Name").Icon
            local vVIndex = vVIcon.Index

            information.Visible = false

            if options.tbl then
                data = options.tbl[name]
            elseif options.func then
                if options.upval then
                    data = getupvalue(options.func, name)
                elseif options.env then
                    data = getfenv(options.func)[name]
                elseif options.constant then
                    data = getconstant(options.func, tonumber(name))
                end
            end

            viewValue.Visible = true
            viewValue.ValueBox.Text = tostring(data)
            vVIcon.Image = "rbxassetid://" .. typeIcon[dataType]
            vVIndex.Text = name

            vVIndex.Size = UDim2.new(0, vVIndex.TextBounds.X, 0, 20)
            vVIcon.Position = UDim2.new(1, -(vVIndex.TextBounds.X + 24), 0, 4)

            if setValueType.Visible then
                setValueType.Visible = false
            end

            if vVBackEvent then
                vVBackEvent:Disconnect()
            end

            if vVChangeEvent then
                vVChangeEvent:Disconnect()
            end

            vVBackEvent = viewValue.Back.MouseButton1Click:Connect(function()
                viewValue.Visible = false
                information.Visible = true
            end)

            vVChangeEvent = viewValue.Change.MouseButton1Click:Connect(function()
                setValueType.Visible = true
                if svtEvent then
                    svtEvent:Disconnect()
                end
                svtEvent = setValueType.Set.MouseButton1Click:Connect(function()
                    local typeSelected 
                    for i,v in next, setValueType:GetChildren() do
                        if v:IsA("TextButton") and v.Text == '✓' then
                            typeSelected = v.Name:lower()
                        end
                    end
                    
                    if not typeSelected then
                        ui.msg('', "You must select a type!")
                        return
                    end

                    local newValue
                    local valueText = viewValue.ValueBox.Text
                    if typeSelected == "number" then
                        newValue = tonumber(valueText)
                        if not newValue then
                            ui.msg('', "Invalid number value!")
                            return
                        end
                    elseif typeSelected == "string" then
                        newValue = valueText
                    elseif typeSelected == "boolean" then
                        if valueText == "true" then
                            newValue = true
                        elseif valueText == "false" then
                            newValue = false
                        else
                            ui.msg('', "Invalid boolean value!")
                            return
                        end
                    elseif typeSelected == "userdata" then
                        newValue = loadstring("return " .. valueText)()
                        if not newValue or typeof(newValue) ~= "Instance" then
                            ui.msg('', "Invalid instance value!")
                            return
                        end
                    end

                    if options.tbl then
                        local index = options.tbl[name]
                        options.tbl[name] = newValue

                        print(options.tbl[name])
                    end

                    if options.upval then
                        setupvalue(options.func, name, newValue)

                        print(getupvalue(options.func, name))
                    elseif options.env then
                        getfenv(options.func)[name] = newValue

                        print(getfenv(options.func)[name])
                    elseif options.constant then
                        setconstant(options.func, tostring(name), newValue)

                        print(getconstant(options.func, tostring(name)))
                    end

                    svtClear()
                    scanUpvalues()
                    dataType = type(newValue)
                    icon.Image = "rbxassetid://" .. typeIcon[dataType]
                    vVIcon.Image = icon.Image
                    infoBody.Type.Text = "type: " .. dataType
                    viewValue.ValueBox.Text = tostring(newValue)
                    setValueType.Visible = false
                end)
            end)
        end)
    end

    if dataType == "function" then
        infoBody.Upvalues.Text = "upvalues: " .. abs.tableSize(getupvalues(data))
        infoBody.Constants.Text = "constants: " .. abs.tableSize(getconstants(data))
    elseif dataType == "table" then
        infoBody.Elements.Text = "elements: " .. abs.tableSize(data)
    end
end

-- < Interface : Sidebar > 
local collapseIcon = { -- Open/Collapse icons
	["true"] = 3270754211,
	["false"] = 3271004659
}

ui.addButton = function(name, data, parent, options) -- Function to add new sidebar button
    if data == nil then
        return
    end

    local dataType = type(data)

    local button = buttonClone:Clone()
    local collapse = button.Collapse
    local label = button.Label
    local children

    if not parent then -- If no parent is specified, then assign to the root directory
        parent = sidebar
    end
    
    if not options then -- If no options are given, then create options
        options = {}
    end

    if not options.icon then -- If no icon is defined, then assign an icon based on the data's type
        options.icon = typeIcon[dataType]
    end

    button.Name = name
    button.Parent = parent
    button.Icon.Image = "rbxassetid://" .. options.icon

    label.Text = name
    label.Size = UDim2.new(0, label.TextBounds.X + 10, 0, 20)
    ui.addHighlight(label) -- Add highlight to sidebar button
    label.MouseButton1Click:Connect(function()
        showInfo(name, data, options)
    end)

    local fn = {}
    fn.findRoot = function(obj, parent) -- Travels up the root directory until it hits the given parent
        if type(obj) ~= "userdata" or obj.Parent == parent then
            return obj
        end

        return fn.findRoot(obj.Parent, parent)
    end

    local root = fn.findRoot(button, sidebar)

    local addCollapse = function(element) -- Adds collapse mechanism to sidebar button
        local collapse = element.Collapse

        children = Instance.new("Frame", button)
        local format = Instance.new("UIListLayout", children)
        
        local fitChildren = function(element, size) -- Changes the height of the given element to however many children there are
            element[size] = UDim2.new(0, element[size].X.Offset, 0, 0)

            for i, e in next, element:GetChildren() do
                if not e:IsA("UIListLayout") then
                    element[size] = element[size] + UDim2.new(0, 0, 0, e.Size.Y.Offset)
                end
            end
        end

        local mostX = 0
        local scanLargestX = function() -- Scans the root directory's descendants for the farthest indented button
            for i, d in next, sidebar:GetDescendants() do
                if d.Name == "Label" and d.ClipsDescendants and (d.AbsolutePosition.X + d.TextBounds.X) > mostX then
                    mostX = d.AbsolutePosition.X + d.TextBounds.X
                end
            end
        end

        format.SortOrder = "LayoutOrder"
        
        children.Position = UDim2.new(0, 10, 0, 20) 
        children.Size = UDim2.new(0, 175, 0, 0)
        children.BackgroundTransparency = 1
        children.Name = "Children"

        collapse.Visible = true
        collapse.ClipsDescendants = false
        collapse.MouseEnter:Connect(function()
            collapse.ImageTransparency = 0
        end)

        collapse.MouseLeave:Connect(function()
            collapse.ImageTransparency = 0.5
        end)

        local processing = false
        collapse.MouseButton1Click:Connect(function()
            local collapsed = collapse.ClipsDescendants -- Randomly chose a trait to set as a flag which determines whether a button is collapsed or not

            local scripts, modules = abs.getScripts()

            fn.adjustRoots = function(button, y) -- Adjusts the entire button's roots' sizes
                if button.Parent == sidebar then
                    return
                end

                button.Parent.Size = button.Parent.Size + UDim2.new(0, 0, 0, y)
                return fn.adjustRoots(button.Parent, y)
            end

            if collapsed then
                button.Size = button.Size - UDim2.new(0, 0, 0, children.Size.Y.Offset)
                children.Size = UDim2.new(0, 175, 0, 0)

                local y = 0
                for i, c in next, button.Children:GetChildren() do -- Determines how much it should collapse by
                    if not c:IsA("UIListLayout") then
                        y = y - c.Size.Y.Offset
                    end
                end

                fn.adjustRoots(button, y)

                for i, d in next, button.Children:GetDescendants() do -- Since we're collapsing this entire thing, we should probably make everything inside of it invisible
                    if d.Name == "Label" then
                        d.ClipsDescendants = false
                    end
                end

                scanLargestX() -- Scan for Sidebar CanvasSize X determination
            else -- Opened
                if not processing then
                    processing = true
                else
                    return
                end
                if type(data) == "table" and not dataCache[data] then
                    local cache = {} -- Remove all cloned data
                    for i, e in next, data do
                        if not cache[i] then
                            local options, module = {tbl = data}

                            -- Check if the passed data is a script
                            if type(e) == "function" and ({["rbxassetid://3285607721"] = true, ["rbxassetid://3285696601"] = true})[root.Icon.Image] then
                                if scripts[i] then
                                    options.icon = 3285608077
                                elseif modules[i] then
                                    options.icon = 3285656377
                                    module = ui.addButton("Return Type", require(getfenv(e).script), button.Children)
                                end
                            end

                            -- Create button for the data
                            options.tbl = data
                            local data = ui.addButton(tostring(i), e, button.Children, options)

                            -- not sure why this happens???? but delete if it does happen, otherwise parent it
                            if data and module and data:FindFirstChild("Children") then
                                module.Parent = data.Children
                            elseif module and not data:FindFirstChild("Children") then
                                data:Destroy()
                                module:Destroy()
                            end

                            cache[i] = true -- Cache this, so that if we run across it again, we don't clone it
                        end
                    end

                    dataCache[data] = true
                elseif type(data) == "function" then
                    local filteredEnv, filteredUpvs = {}, {}
                    local constants = getconstants(data)

                    for i, u in next, getupvalues(data) do -- Remove all upvalues that are named any one of Roblox's globals
                        if not getrenv()[i] then
                            filteredUpvs[i] = u
                        end
                    end

                    for i, e in next, getfenv(data) do
                        if i ~= "script" then
                            filteredEnv[i] = e
                        end
                    end

                    if abs.tableSize(filteredUpvs) ~= 0 and not button.Children:FindFirstChild("Upvalues") then
                        local btn = ui.addButton("Upvalues", {}, button.Children, {showCollapse = true})
                        for i,v in next, filteredUpvs do
                            ui.addButton(tostring(i), v, btn.Children, {func = data, upval = true})
                        end
                    end

                    if abs.tableSize(filteredEnv) ~= 0 and not button.Children:FindFirstChild("Environment") then
                        local btn = ui.addButton("Environment", {}, button.Children, {showCollapse = true})
                        for i,v in next, filteredEnv do
                            ui.addButton(tostring(i), v, btn.Children, {func = data, env = true})
                        end
                    end

                    if abs.tableSize(constants) ~= 0 and not button.Children:FindFirstChild("Constants") then
                        local btn = ui.addButton("Constants", {}, button.Children, {showCollapse = true})
                        for i,v in next, getconstants(data) do
                            ui.addButton(tostring(i), v, btn.Children, {func = data, constant = true})
                        end
                    end
                end

                fitChildren(children, "Size") -- Resize children frame to fit all buttons
                button.Size = button.Size + UDim2.new(0, 0, 0, children.Size.Y.Offset) -- Resize button's size to "Children" size to fit current directory

                local y = 0
                for i, c in next, button.Children:GetChildren() do
                    if not c:IsA("UIListLayout") then
                        y = y + c.Size.Y.Offset
                        c.Visible = true
                    end
                end

                fn.adjustRoots(button, y)

                for i, d in next, button.Children:GetDescendants() do
                    if d.Name == "Label" and not d.Parent.Collapse.ClipsDescendants and d.Parent ~= button.Children then
                        d.ClipsDescendants = true
                    end
                end

                scanLargestX()

                processing = false
            end

            sidebar.CanvasSize = UDim2.new(0, 0, 0, 0)
            fitChildren(sidebar, "CanvasSize") -- Resize sidebar to fit opened directory

            local oldPosition = sidebar.CanvasPosition
            sidebar.CanvasSize = UDim2.new(0, (mostX - sidebar.AbsolutePosition.X), 0, sidebar.CanvasSize.Y.Offset)
            sidebar.CanvasPosition = oldPosition    

            collapse.Image = "rbxassetid://" .. collapseIcon[tostring(collapsed)]

            element.ClipsDescendants = collapsed
            collapse.ClipsDescendants = not collapsed
        end)

        sidebar.CanvasSize = UDim2.new(0, 0, 0, 0)
        fitChildren(sidebar, "CanvasSize") -- Resize sidebar to fit newly added child
    end

    if options.showCollapse or options.upvalueTable or options.envTable then
        addCollapse(button) -- Add collapse to button with collapse enabled
    end

    -- Add collapse to tables or functions with upvalues/environments
    if ( dataType == "table" and abs.tableSize(data) ~= 0 ) or ( dataType == "function" and islclosure(data) ) then
        local increment = 0
        if dataType == "function" then -- Get environment size
            increment = abs.tableSize(getfenv(data))
        end

        if not options.showCollapse then -- If the environment size of the function is more than the "script" element then add a collapse
            if dataType ~= "function" or ( dataType == "function" and ( (getfenv(data).script) and increment > 1 ) or (abs.tableSize(getconstants(data)) ~= 0 or abs.tableSize(getfenv(data)) > 1 or abs.tableSize(getupvalues(data)) ~= 0) ) then
                addCollapse(button)
            end
        end
    end

    -- Add collapse to metatables
    if not abs.isRobloxType(data) and getrawmetatable(data) and abs.tableSize(getrawmetatable(data)) ~= 0 then
        if not button.Collapse.Visible then
            addCollapse(button)
        end

        local filteredMetatable = {}
        for i,v in next, getrawmetatable(data) do
            if v ~= getrawmetatable(data) then
                filteredMetatable[i] = v
            end
        end

        ui.addButton("Metatable", filteredMetatable, button.Children, {isMetatable = true})
    end

    return button
end 

-- < RemoteSpy >
local gmt = getrawmetatable(game)
setreadonly(gmt, false)
local nmc = gmt.__namecall

gmt.__namecall = function(t, ...)
    return nmc(t, ...)
end

-- < HttpSpy >

-- < Search Upvalues >
local currentUpvalues = {}
local viewSearchUpvalues = false

local upvalQuery = searchUpvalues.Query
local upvalSearch = searchUpvalues.Search
local upvalScroll = searchUpvalues.Upvalues.Scroll

local upvalueClone = upvalScroll.Upvalue:Clone()
upvalScroll.Upvalue:Destroy()

local createUpvalue = function(name, data, func)
    local upvalue = upvalueClone:Clone()
    local label = upvalue.Label
    
    upvalue.Icon.Image = "rbxassetid://" .. typeIcon[type(data)]
    label.Name = name
    label.Text = name

    label.MouseButton1Click:Connect(function()
        searchUpvalues.Visible = false
        viewValue.Visible = false
        border.Visible = true

        viewSearchUpvalues = false

        showInfo(name, data, {addToExplorer = true, func = func, upval = true})
    end)

    upvalue.Parent = upvalScroll
end

misc.SearchUpvalues.Label.MouseButton1Click:Connect(function()
    if not viewSearchUpvalues then
        border.Visible = false
        searchUpvalues.Visible = true
    else
        searchUpvalues.Visible = false
        border.Visible = true
    end
    viewSearchUpvalues = not viewSearchUpvalues
end)

upvalScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
scanUpvalues = function()
    for i,v in next, upvalScroll:GetChildren() do
        if not v:IsA("UIListLayout") then
            v:Destroy()
        end
    end

    upvalScroll.CanvasSize = UDim2.new(0, 0, 0, 0)

    local text = upvalQuery.Text
    for i,v in next, abs.getUpvalues() do
        if text:lower():sub(1, text:len()) == tostring(i):lower():sub(1, text:len()) then -- holy god this is long
            createUpvalue(tostring(i), v.data, v.func)
            upvalScroll.CanvasSize = upvalScroll.CanvasSize + UDim2.new(0, 0, 0, 20)
        end
    end
end

scanUpvalues()
upvalSearch.MouseButton1Click:Connect(scanUpvalues)
upvalQuery.FocusLost:Connect(function(fromEnter)
    if fromEnter then
        scanUpvalues()
    end
end)

-- < Runtime >
interface.Parent = game.CoreGui

local startMessage = loadstring(game:HttpGet("https://raw.githubusercontent.com/0x90-NOP/Hydroxide/master/startMessage.lua"))()
ui.msg(unpack(startMessage))
